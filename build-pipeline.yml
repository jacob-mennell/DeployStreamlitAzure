pool:
  name: Azure Pipelines

variables:
  currentDate: $[format('{0:yyyyMMdd}', pipeline.startTime)]

steps:
- task: Docker@2
  displayName: 'Build Docker Image'
  inputs:
    command: 'build'
    dockerfile: '/Dockerfile'
    buildContext: ''
    tags: ':$(currentDate)'

- task: Docker@2
  displayName: 'Push Docker Image to ACR'
  inputs:
    command: 'push'
    azureContainerRegistry: ''
    repository: ''
    image: '$(currentDate)'

- task: AzureWebAppContainer@1
  displayName: 'Deploy to Azure App Service'
  inputs:
    azureSubscription: ''
    appName: ''
    imageName: ':$(currentDate)'
